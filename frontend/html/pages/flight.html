<div class="tab-pane active" id="flight">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">Flight</h1>
  </div>


  <!-- ========================= -->
  <!-- Existing Flight form (unchanged except for Mission now above) -->
  <!-- ========================= -->
  <form id="flight-form" data-nav-target="#mission" class="needs-validation" validate>
    <div class="form-group">
      <label for="flight-airframe">Airframe</label>
      <select name="flight-airframe" data-previous="" id="flight-airframe" class="form-control" required>
        <option value="" selected disabled hidden>Select Airframe...</option>
       <!-- <option>A-10C</option>
        <option value="AV8BNA">AV-8B N/A</option>
        <option>F-14B</option>
        <option value="F-15ESE">F-15E</option> -->
        <option>F-16C</option>
        <!--<option value="FA-18C">F/A-18C</option>
        <option>M-2000C</option>
        <option>AH-64D</option>
        <option>Ka-50</option>
        <option>Mi-8MT</option>
        <option>SA342L</option>
        <option>SA342M</option>
        <option>UH-1H</option>
        <option>UH-60L</option>
        <option value="OH58D">OH-58D</option>-->
      </select>
    </div>

    <div id="flight-members-container" style="display: none">

      <div class="form-row">
        <div class="col-7"> 
          <div class="form-group p-0 mb-0">
            <label>Coordinate Format</label>
          </div>
          <div class="form-inline mb-3">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-primary active">
                <input type="radio" name="flight-coord" id="flight-coord-dms" value="dms" autocomplete="off" checked>DMS
              </label>
              <label class="btn btn-primary">
                <input type="radio" name="flight-coord" id="flight-coord-ddm" value="ddm" autocomplete="off">DDM
              </label>
              <label class="btn btn-primary">
                <input type="radio" name="flight-coord" id="flight-coord-dd" value="dd" autocomplete="off">DD
              </label>
              <label class="btn btn-primary">
                <input type="radio" name="flight-coord" id="flight-coord-mgrs" value="mgrs" autocomplete="off">MGRS
              </label>
            </div>
            <div class="p-2">to</div>
            <input type="number" min="0" max="5" class="form-control" style="width: 80px"
                   name="flight-coord-decimals" id="flight-coord-decimals" value="2">
            <div class="p-2">decimal places</div>
          </div>
        </div>
        <div class="col"> 
          <div class="form-group">
            <label class="heading">Example</label>
            <div type="text" class="form-control coord-ctrl" data-fmt-combo
                 data-lat="50.4482744" data-lon="30.5375435"
                 id="flight-coord-example" style="background-color: #e9ecef"></div>
          </div>
        </div>
      </div>


  <!-- ========================= -->
  <!-- Mission section (moved here from Mission tab) -->
  <!-- ========================= -->
  <form id="mission-form" data-nav-target="#package" class="needs-validation" novalidate>
    <div class="form-row">
      <div class="col col-6">
        <div class="form-group">
          <label for="mission-id">Mission Number</label>
          <div class="input-group">
            <input type="text" class="form-control" name="mission-id" id="mission-id"
                   pattern="^[A-Za-z0-9-]+$">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" type="button" id="mission-number-generate">
                Generate
              </button>
            </div>
          </div>
          <div class="invalid-feedback">
            Please enter an alpha-numeric Mission Number without spaces, this is used for file names etc.
          </div>
        </div>
      </div>
          <div class="col col-6">
  <div class="form-group">
    <label for="mission-type">Mission Type</label>
    <select class="form-control" name="mission-type" id="mission-type" required>
      <option value="" disabled selected hidden>Select Mission Type...</option>

      <option>AI</option>
      <option>AIRLIFT</option>
      <option>AR</option>
      <option>AAR</option>
      <option>BDA</option>
      <option>CAS</option>
      <option>CSAR</option>
      <option>DCA</option>
      <option>EW</option>
      <option>FAC-A</option>
      <option>GAI</option>
      <option>GCAS</option>
      <option>XAI</option>
      <option>XCAS</option>
      <option>ISR</option>
      <option>OCA-AO (AI)</option>
      <option>OCA-DEAD</option>
      <option>OCA-ESC</option>
      <option>OCA-SEAD</option>
      <option>OCA-SWEEP</option>
      <option>QRA</option>
      <option>RESCAP</option>
      <option>SCAR</option>
      <option>STRIKE</option>
      <option>TST</option>
    </select>
  </div>
</div>

    </div>


    <div class="form-row">
      <!-- Squadron -->
      <div class="col">
        <div class="form-group">
          <label for="mission-squadron">Squadron</label>
          <select class="form-control" name="mission-squadron" id="mission-squadron">
            <option value="" selected disabled hidden>Select Squadron...</option>
            <option value="8th vFS">8th vFS</option>
            <option value="561st vFS">561st vFS</option>
            <option value="18th vAGRS">18th vAGRS</option>
          </select>
        </div>
      </div>

      <!-- Callsign + Auto button -->
      <div class="col-3">
        <div class="form-group">
          <label for="mission-callsign">Callsign</label>
          <div class="input-group">
            <input type="text" class="form-control" name="mission-callsign" id="mission-callsign">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" type="button" id="mission-callsign-generate">
                Generate
              </button>
            </div>
          </div>
          <!-- Hidden fields to store L16 CS / STN from generator -->
          <input type="hidden" name="mission-l16-callsign" id="mission-l16-callsign">
          <input type="hidden" name="mission-stn" id="mission-stn">
        </div>
      </div>

      <!-- Flight number -->
      <div class="col-2">
        <div class="form-group">
          <label for="mission-flight-number">Flight Number</label>
          <input type="number" class="form-control" name="mission-flight-number"
                 id="mission-flight-number" value="1" max="9" min="1">
        </div>
      </div>

      <!-- Primary frequency -->
      <div class="col">
        <div class="form-group">
          <label for="mission-pri-freq">Primary Frequency</label>
          <input type="text" class="form-control freq-autocomplete freq-pst"
                 data-title="FLIGHT PRI" name="mission-pri-freq" id="mission-pri-freq">
          <div class="invalid-feedback"></div>
        </div>
      </div>

      <!-- Secondary frequency -->
      <div class="col">
        <div class="form-group">
          <label for="mission-sec-freq">Secondary Frequency</label>
          <input type="text" class="form-control freq-autocomplete freq-pst"
                 data-title="FLIGHT SEC" name="mission-sec-freq" id="mission-sec-freq">
          <div class="invalid-feedback"></div>
        </div>
      </div>

      <!-- Tertiary (Apache only; visibility handled in JS) -->
      <div class="col" id="mission-ter-frequency" style="display:none">
        <div class="form-group">
          <label for="mission-ter-freq">Tertiary Frequency</label>
          <input type="text" class="form-control freq-autocomplete freq-pst"
                 data-title="FLIGHT SEC" name="mission-ter-freq" id="mission-ter-freq">
          <div class="invalid-feedback"></div>
        </div>
      </div>
    </div>
  </form>

  <hr class="mt-3 mb-3" />

      <div class="form-group">
        <label>Members</label>
      </div>


<!-- ===== Callsign Generation Note ===== -->
<small class="form-text text-muted mb-2">
  <strong>Note:</strong> Add all flight members first, then press 
  <em>Auto Callsign</em> to generate IDs and TNs.
</small>
<!-- ==================================== -->

      <table class="table table-striped mb-0" id="flight-members-table">
        <colgroup>
        </colgroup>
        <thead class="thead-light">
        </thead>
        <tbody>
        </tbody>
      </table>
      <small class="form-text text-muted mb-2">
        Enter full details for FL before adding additional members to handle SQUAWK/LSR/LSS codes etc.
      </small>

      <button class="btn btn-primary" id="flight-add-member" type="button">
        <i data-feather="user-plus"></i>
      </button>

      <div style="text-align: right">
        <button class="btn btn-primary" type="submit">Next...</button>
      </div>
    </div>
  </form>
</div>
